name: Scale AKS Down

on:
  workflow_dispatch:
    inputs:
      env:
        description: "Environment (e.g., dev, staging, prod)"
        required: true
        default: dev

jobs:
  scale-down:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repo
      uses: actions/checkout@v3

    - name: Login to Azure
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}

    - name: Scale GPU pool using script
      run: ./scripts/scale-down.sh ${{ github.event.inputs.env }}
